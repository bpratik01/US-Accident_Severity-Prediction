schema: '2.0'
stages:
  data_ingestion_cleaning:
    cmd: python .\src\data_cleaning.py --force
    deps:
    - path: .\data\raw\sampled_data.csv
      hash: md5
      md5: d0eb920569498f90d0c0932cc2252217
      size: 153913561
    - path: .\src\data_cleaning.py
      hash: md5
      md5: 04b2c1c814fbac4628196979cb07a9f1
      size: 3713
    outs:
    - path: .\data\interim\cleaned_data.csv
      hash: md5
      md5: d4b68a3661f5ca0b670637dfc73825c2
      size: 70490553
  feature_engineering:
    cmd: python .\src\feature_engineering.py
    deps:
    - path: .\data\interim\cleaned_data.csv
      hash: md5
      md5: d4b68a3661f5ca0b670637dfc73825c2
      size: 70490553
    - path: .\src\feature_engineering.py
      hash: md5
      md5: 7418adfbba9f169c62a261182449a806
      size: 5602
    outs:
    - path: .\data\processed\featured_data.csv
      hash: md5
      md5: b5d76f8c65dc8a814246da67bc130311
      size: 58950004
  train:
    cmd: python src/model_building.py
    deps:
    - path: .\src\model_building.py
      hash: md5
      md5: b5152a6f323ad7ba68202a019b644857
      size: 6840
    - path: data/processed/featured_data.csv
      hash: md5
      md5: b5d76f8c65dc8a814246da67bc130311
      size: 58950004
    - path: params.yaml
      hash: md5
      md5: c617f3397bb2d0a84ea4aa161a538fda
      size: 732
    params:
      params.yaml:
        feature_params:
          quantile_cols:
          - Temperature(F)
          - Humidity(%)
          - Pressure(in)
          - Visibility(mi)
          - Wind_Speed(mph)
          - Total_Time
          - Start_Lng
          - Start_Lat
          categorical_cols:
          - City
          - County
          - State
        split_params:
          test_size: 0.1
          val_size: 0.167
          random_state: 42
        xgb_params:
          max_depth: 5
          learning_rate: 0.1
          n_estimators: 200
          min_child_weight: 3
          gamma: 0.1
          subsample: 0.8
          colsample_bytree: 0.8
          random_state: 42
    outs:
    - path: models
      hash: md5
      md5: 9c340f97ebbaf97c179c2f5674f938ca.dir
      size: 3069660
      nfiles: 4
  evaluate:
    cmd: python src/model_eval.py
    deps:
    - path: data/processed/featured_data.csv
      hash: md5
      md5: b5d76f8c65dc8a814246da67bc130311
      size: 58950004
    - path: models
      hash: md5
      md5: 9c340f97ebbaf97c179c2f5674f938ca.dir
      size: 3069660
      nfiles: 4
    - path: src/model_eval.py
      hash: md5
      md5: eb4c7ac467009c0c1fb8d1e6985ecdc8
      size: 3708
    outs:
    - path: evaluation/confusion_matrix.png
      hash: md5
      md5: d84eba1e07493b4430eef7798407f765
      size: 29041
    - path: evaluation/feature_importance.png
      hash: md5
      md5: 5a9a99268e96a2440daf2c6fc5bfa9ee
      size: 35823
    - path: evaluation/metrics.json
      hash: md5
      md5: 68a2ee742ad5b2eed8bc92c2352f4ba7
      size: 1343
